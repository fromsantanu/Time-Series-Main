# Structural Normality Test?

## 🌟 **1. What is Structural Normality Test? (Layman Explanation)**

✅ **Imagine you are throwing a dice repeatedly.**

* You expect numbers **1-6 to appear with equal chance** (normal random behaviour).
* If suddenly only 5 and 6 appear repeatedly, something is wrong.

🔑 **In Time Series Modeling:**

* After fitting a model, we check **residuals (errors)** to see if they behave like **random noise**.

---

### 🧠 **Why Check Residual Normality?**

Most statistical models assume **errors are normally distributed** with mean = 0.

✔️ **If residuals are normal:**

* Model fits well.
* Predictions and confidence intervals are reliable.

❌ **If residuals are not normal:**

* Model assumptions are violated.
* Forecasts may be biased or inefficient.

---

## 🔬 **2. Technical Definition**

✅ **Structural Normality Test (Residual Normality Test)** checks:

* Whether the **residuals of your model follow a normal distribution**.

---

### **Common Tests:**

1. **Jarque-Bera Test**

   * Tests for normality using **skewness and kurtosis**.
   * Null Hypothesis (H0): Residuals are normally distributed.

2. **Shapiro-Wilk Test**

   * Tests for normality (more powerful for small samples).
   * H0: Residuals are normally distributed.

3. **Q-Q Plot (Quantile-Quantile plot)**

   * Visual check for normality.

---

## 🐍 **3. How to Perform Normality Tests on Residuals using Python**

Here is a **step-by-step practical example**:

---

### 🔷 **Step 1. Install and import libraries**

```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import statsmodels.api as sm
from scipy.stats import shapiro, jarque_bera
```

---

### 🔷 **Step 2. Create data and fit a simple time series model**

Here we create data and fit an **ARIMA model** as an example.

```python
# Simulate data with trend and noise
np.random.seed(42)
x = np.arange(100)
y = 2 + 0.5*x + np.random.normal(0,5,100)

# Convert to pandas Series
data = pd.Series(y)

# Fit ARIMA model
model = sm.tsa.ARIMA(data, order=(1,1,1)).fit()

# Get residuals
residuals = model.resid
```

---

### 🔷 **Step 3. Perform Shapiro-Wilk Test**

```python
stat, p_value = shapiro(residuals)

print("Shapiro-Wilk Test Statistic:", stat)
print("p-value:", p_value)

# Interpretation
if p_value < 0.05:
    print("Conclusion: Residuals are NOT normally distributed.")
else:
    print("Conclusion: Residuals are normally distributed.")
```

---

### 🔷 **Step 4. Perform Jarque-Bera Test**

```python
jb_stat, jb_pvalue = jarque_bera(residuals)

print("Jarque-Bera Test Statistic:", jb_stat)
print("p-value:", jb_pvalue)

# Interpretation
if jb_pvalue < 0.05:
    print("Conclusion: Residuals are NOT normally distributed.")
else:
    print("Conclusion: Residuals are normally distributed.")
```

---

### 🔷 **Step 5. Visual Normality Check using Q-Q Plot**

```python
sm.qqplot(residuals, line='s')
plt.title("Q-Q Plot of Residuals")
plt.show()
```

✅ **Interpretation (Layman):**

* If points lie along the straight line → **residuals are normal**.
* If points deviate significantly → **residuals are not normal**.

---

## 💡 **4. Final Summary (Layman)**

✔️ **Residual Normality Tests check if model errors behave like random noise.**
✔️ **Why important?** Validates model assumptions for reliable forecasts.
✔️ **How to check?** Use **Shapiro-Wilk, Jarque-Bera, and Q-Q plot** in Python.

---

