
# üî∞ **STAGE 4 ‚Äî Preprocessing & Transformation**

---

## 1Ô∏è‚É£ **Goal:**

* Make the time series stationary if it is not.
* Prepare the data for modeling (ARIMA, SARIMA, etc.)

---

## 2Ô∏è‚É£ **Techniques to Make Stationary:**

| Method                     | When to Use                        |
| -------------------------- | ---------------------------------- |
| **Differencing**           | Remove trend                       |
| **Log Transformation**     | Stabilize variance                 |
| **Seasonal Differencing**  | Remove seasonality                 |
| **Box-Cox Transformation** | Stabilize variance (more flexible) |

---

## 3Ô∏è‚É£ **Let‚Äôs Apply These Techniques**

---

### üî∏ **A) Log Transformation**

```python
import numpy as np

# Apply log transformation
df['Sales_log'] = np.log(df['Sales'])

# Plot
plt.figure(figsize=(12,6))
plt.plot(df['Sales_log'])
plt.title('Log Transformed Sales')
plt.show()
```

üëâ This reduces variance fluctuation.

---

### üî∏ **B) Differencing (1st Order)**

```python
# First differencing
df['Sales_log_diff'] = df['Sales_log'].diff()

# Drop NaN (because first difference creates one missing value)
df_diff = df['Sales_log_diff'].dropna()

# Plot
plt.figure(figsize=(12,6))
plt.plot(df_diff)
plt.title('First Order Differenced (Log Transformed)')
plt.show()
```

üëâ Differencing removes trend.

---

### üî∏ **C) Check Stationarity Again**

Let‚Äôs rerun the ADF test on differenced data:

```python
adf_result_diff = adfuller(df_diff)

print('ADF Statistic:', adf_result_diff[0])
print('p-value:', adf_result_diff[1])
for key, value in adf_result_diff[4].items():
    print('Critical Value (%s): %.3f' % (key, value))
```

‚úÖ **If p-value < 0.05 ‚Üí Now your data is stationary.**

---

‚úÖ **What we learned:**

* How to transform data
* How to remove trend
* How to check stationarity after transformation

---

üëâ **Your task:**

* Apply log transformation + differencing.
* Test stationarity again.
* If stationarity is not achieved, sometimes *second differencing* may be required (`df['Sales_log'].diff().diff()`).

---

---

# üî∞ **NEXT STAGE**

Now that your data is stationary, we are ready for modeling!

‚úÖ **Stage 5 will be: ARIMA Modeling (Auto Regressive Integrated Moving Average)**

---

üëâ Shall I continue to **Stage 5 ‚Äî ARIMA Modeling**?
If yes, please say **Continue**.

