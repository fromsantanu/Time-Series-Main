# Autocorrelation

## üåü **1. What is Autocorrelation? (Layman Explanation)**

‚úÖ **Imagine you are checking daily temperature.**

* If today is hot, tomorrow is also hot.
* If today is cold, tomorrow is also cold.

This means **today's temperature affects tomorrow's temperature**.
That relationship is called **autocorrelation** (also known as **serial correlation**).

üîë **Simply:**

* **Autocorrelation tells us if the present value is related to past values.**

---

### üß† **Why is Autocorrelation Important?**

In **time series analysis**, autocorrelation helps to:

1. **Detect patterns or seasonality** (e.g. sales go up every December).
2. Decide **which past values to include** when building forecasting models like ARIMA.

---

## üî¨ **2. Technical Definition**

Autocorrelation is the **correlation of a time series with its own past values**.

* **Lag:** The time difference between current and past value.
* We calculate **correlation** for different lags (1,2,3‚Ä¶).

---

### **Example:**

If sales this month are **highly correlated with sales 12 months ago**, it indicates **yearly seasonality**.

---

## üß™ **3. How do we Test for Autocorrelation?**

### **Common Tests:**

1. **ACF (Autocorrelation Function) Plot**

   * Shows autocorrelation at different lags visually.

2. **Durbin-Watson Test**

   * Checks autocorrelation at lag 1.
   * Value near **2 ‚Üí no autocorrelation**
   * Value < 2 ‚Üí **positive autocorrelation**
   * Value > 2 ‚Üí **negative autocorrelation**

3. **Ljung-Box Test**

   * Checks if overall autocorrelations are zero (null hypothesis: no autocorrelation).

---

## üêç **4. How to Perform Autocorrelation Tests using Python**

Here is a **step-by-step practical example**:

---

### üî∑ **Step 1. Import libraries and create data**

```python
import pandas as pd
import matplotlib.pyplot as plt
from statsmodels.graphics.tsaplots import plot_acf
from statsmodels.stats.stattools import durbin_watson
from statsmodels.stats.diagnostic import acorr_ljungbox

# Sample data with autocorrelation (upward trend)
data = {'Month': pd.date_range(start='2020-01', periods=12, freq='M'),
        'Sales': [100, 105, 107, 110, 115, 120, 125, 130, 135, 140, 145, 150]}
df = pd.DataFrame(data)
df.set_index('Month', inplace=True)
```

---

### üî∑ **Step 2. Plot Autocorrelation Function (ACF)**

```python
plot_acf(df['Sales'], lags=10)
plt.title('ACF Plot')
plt.show()
```

‚úÖ **Interpretation (Layman):**

* Bars crossing the blue line ‚Üí **Significant autocorrelation at that lag**.
* For example, if lag 1 has a high value ‚Üí today is highly related to yesterday.

---

### üî∑ **Step 3. Perform Durbin-Watson Test**

```python
dw_stat = durbin_watson(df['Sales'])
print("Durbin-Watson Statistic:", dw_stat)

# Interpretation
if dw_stat < 1.5:
    print("There is positive autocorrelation.")
elif dw_stat > 2.5:
    print("There is negative autocorrelation.")
else:
    print("No significant autocorrelation.")
```

---

### üî∑ **Step 4. Perform Ljung-Box Test**

```python
# Null hypothesis: no autocorrelation
lb_test = acorr_ljungbox(df['Sales'], lags=[10], return_df=True)
print(lb_test)

# Interpretation
if lb_test['lb_pvalue'].values[0] < 0.05:
    print("Reject null hypothesis: Autocorrelation present.")
else:
    print("Fail to reject null hypothesis: No significant autocorrelation.")
```

---

## üí° **5. Final Summary for Layman**

‚úîÔ∏è **Autocorrelation = current value relates to past values.**
‚úîÔ∏è **Why important?** Detect patterns, seasonality, model design.
‚úîÔ∏è **How to check?** Use **ACF plot**, **Durbin-Watson**, and **Ljung-Box Test** in Python.

---

# PACF (Partial Autocorrelation Function)

## üåü **1. What is PACF? (Layman Explanation)**

Imagine you want to know **how much today‚Äôs sales depend on sales two days ago**, **without the influence of yesterday's sales**.

‚úÖ **Autocorrelation (ACF)** tells you **total effect**, including intermediate lags.
‚úÖ **Partial Autocorrelation (PACF)** tells you **direct effect only**, removing influence of intermediate lags.

---

### üß† **Simple Analogy**

* If **A influences B**, and **B influences C**, then **A indirectly influences C**.
* **PACF removes that indirect influence**, showing only **direct connection** between A and C.

---

## üî¨ **2. Technical Definition**

* **PACF at lag k** is the correlation between value at time t and t-k **after removing effects of lags 1, 2, ..., k-1**.

---

### üí° **Why is PACF Important?**

In **ARIMA modeling**:

* **ACF** helps decide **q (MA order)**.
* **PACF** helps decide **p (AR order)**.

---

### ‚úÖ **Key takeaway:**

‚úîÔ∏è **AR (AutoRegressive) models ‚Üí PACF plot to choose p**
‚úîÔ∏è **MA (Moving Average) models ‚Üí ACF plot to choose q**

---

## üêç **3. How to Perform PACF in Python**

Here is a **step-by-step practical example**:

---

### üî∑ **Step 1. Import libraries and create data**

```python
import pandas as pd
import matplotlib.pyplot as plt
from statsmodels.graphics.tsaplots import plot_pacf

# Sample data with autocorrelation
data = {'Month': pd.date_range(start='2020-01', periods=12, freq='M'),
        'Sales': [100, 105, 107, 110, 115, 120, 125, 130, 135, 140, 145, 150]}
df = pd.DataFrame(data)
df.set_index('Month', inplace=True)
```

---

### üî∑ **Step 2. Plot Partial Autocorrelation Function (PACF)**

```python
plot_pacf(df['Sales'], lags=10, method='ywm')
plt.title('PACF Plot')
plt.show()
```

‚úÖ **Interpretation (Layman):**

* Bars that cross the blue significance line ‚Üí **Significant direct relationship** at that lag.
* For example, if lag 1 is significant but lag 2 is not, it means **only the previous value directly influences the current value**.

---

### üî∑ **Step 3. Using PACF for ARIMA Modeling**

When building **ARIMA models**, use:

* **PACF plot ‚Üí decide p (AR order)** by counting significant lags.
* **ACF plot ‚Üí decide q (MA order)** similarly.

---

## üí° **4. Final Summary for Layman**

‚úîÔ∏è **PACF tells direct impact** of past values after removing intermediate effects.
‚úîÔ∏è Helps to **choose AR order (p)** in ARIMA models.
‚úîÔ∏è **Use plot\_pacf** function in Python for analysis.

---

